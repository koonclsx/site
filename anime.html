<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-translate="anime">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∞–Ω–∏–º–µ</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
</head>
<body>
    
    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
    <!-- Main container -->
    <div class="container">

        <!-- –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥ -->
        <!-- Back button -->
        <div class="page-links">
            <a href="index.html" class="page-button">–ì–ª–∞–≤–Ω–∞—è</a>
        </div>

        <h1 data-translate="anime">–ú–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–Ω–∏–º–µ</h1>
        <h2 data-translate="leg">–õ–µ–≥–µ–Ω–¥–∞ —Å–ø–∏—Å–∫–∞</h2>
        <p data-translate="leg3">#üé¨ = –°–º–æ—Ç—Ä—é</p>
        <p data-translate="leg4">#üìù = –í –ø–ª–∞–Ω–∞—Ö</p>
        <p data-translate="leg5">#‚úÖ = –ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ</p>
        <div class="anime-list">
            <ul id="anime-list"></ul>
        </div>
    </div>

    <script>

        //<!-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è —á—Ç–µ–Ω–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ CSV -->
        //<!-- Function for reading and processing CSV -->
        async function loadAnimeData() {
    try {
        const response = await fetch('data/anime/anime.csv');
        if (!response.ok) {
            throw new Error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞');
        }
        const csvData = await response.text();

        //<!-- –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –Ω–∞ —è—á–µ–π–∫–∏, –∏–≥–Ω–æ—Ä–∏—Ä—É—è –∑–∞–ø—è—Ç—ã–µ –≤–Ω—É—Ç—Ä–∏ –∫–∞–≤—ã—á–µ–∫ -->
        //<!-- Regular expression for dividing into cells, ignoring commas inside quotation marks -->
        const rows = csvData.split('\n').slice(1).filter(row => row.trim() !== '');

        return rows.map(row => {

            //<!-- –†–∞–∑–¥–µ–ª—è–µ–º —Å—Ç—Ä–æ–∫–∏ –ø–æ –∑–∞–ø—è—Ç–æ–π, –∏–≥–Ω–æ—Ä–∏—Ä—É—è –∑–∞–ø—è—Ç—ã–µ –≤–Ω—É—Ç—Ä–∏ –∫–∞–≤—ã—á–µ–∫ -->
            //<!-- Separating lines by commas, ignoring commas inside quotation marks -->
            const columns = row.match(/(".*?"|[^",\n]+)(?=\s*,|\s*$)/g).map(col => col.replace(/^"|"$/g, '').trim());

            //<!-- –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö –∑–Ω–∞—á–µ–Ω–∏–π -->
            //<!-- Checking for all values -->
            const id = columns[0] || '';
            const title_ru = columns[1] || '';
            const title_en = columns[2] || '';
            const status = columns[3] || '';

            return {
                id,
                title_ru,
                title_en,
                status
            };
        });
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:', error);
        return [];
    }
}

        //<!-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∞–Ω–∏–º–µ -->
        //<!-- A function for displaying a list of anime -->
        async function displayAnimeList() {
            const animeList = await loadAnimeData();
            const animeListElement = document.getElementById('anime-list');
            animeList.forEach(anime => {
                const listItem = document.createElement('li');
                listItem.innerHTML = `
                    <div>
                        <strong>${anime.title_ru}</strong><br>
                        <span style="font-size: 0.9em; color: gray;">${anime.title_en}</span>
                    </div>
                    <span>${anime.status}</span>
                `;
                animeListElement.appendChild(listItem);
            });
        }

        //<!-- –ó–∞–ø—É—Å–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∞–Ω–∏–º–µ -->
        //<!-- Starting the anime list display -->
        displayAnimeList();
    </script>

    <!-- –ö–Ω–æ–ø–∫–∞ —Å–º–µ–Ω—ã —è–∑—ã–∫–∞ -->
    <!-- Language change button -->
    <div class="language-switch">
        <button class="lang-btn" data-lang="ru">RU</button>
        <button class="lang-btn" data-lang="en">EN</button>
    </div>

    <!-- –ó–∞–ø—Ä–æ—Å —Å–∫—Ä–∏–ø—Ç–æ–≤ -->
    <!-- Request Scripts -->
    <script src="scripts.js"></script>
    
</body>
</html>
