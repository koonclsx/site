<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data translate="games">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∏–≥—Ä–∞–º</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
</head>
<body>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
    <!-- Main container -->
    <div class="container">

        <!-- –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥ -->
        <!-- Back button -->
        <div class="page-links">
            <a href="index.html" class="page-button">–ì–ª–∞–≤–Ω–∞—è</a>
        </div>

        <h1 data-translate="games">–ú–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä</h1>
        <h2 data-translate="leg">–õ–µ–≥–µ–Ω–¥–∞ —Å–ø–∏—Å–∫–∞</h2>
        <p data-translate="leg1">#üé´ = –õ–∏—Ü–µ–Ω–∑–∏—è (–ö—É–ø–ª–µ–Ω–Ω–∞ –∏–ª–∏ –ø–æ–ª—É—á–µ–Ω–Ω–∞ –≤ –æ—Ñ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–º –º–∞–≥–∞–∑–∏–Ω–µ.)</p>
        <p data-translate="leg2">#‚ú¥Ô∏è = –ü–ª–∞—Ç–∏–Ω–∞ (–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π.)</p>
        <p data-translate="leg6">#üéÆ = –ü—Ä–æ—Ö–æ–∂—É</p>
        <p data-translate="leg7">#‚úÖ = –ü—Ä–æ—à–µ–ª</p>
        <div class="games-list">
            <ul id="games-list"></ul>
        </div>
    </div>

    <script>

        //<!-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è —á—Ç–µ–Ω–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ CSV -->
        //<!-- Function for reading and processing CSV -->
        async function loadGamesData() {
    try {
        const response = await fetch('data/games/games.csv');
        if (!response.ok) {
            throw new Error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞');
        }
        const csvData = await response.text();

        //<!-- –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –Ω–∞ —è—á–µ–π–∫–∏, –∏–≥–Ω–æ—Ä–∏—Ä—É—è –∑–∞–ø—è—Ç—ã–µ –≤–Ω—É—Ç—Ä–∏ –∫–∞–≤—ã—á–µ–∫ -->
        //<!-- Regular expression for dividing into cells, ignoring commas inside quotation marks -->
        const rows = csvData.split('\n').slice(1).filter(row => row.trim() !== '');

        return rows.map(row => {

            //<!-- –†–∞–∑–¥–µ–ª—è–µ–º —Å—Ç—Ä–æ–∫–∏ –ø–æ –∑–∞–ø—è—Ç–æ–π, –∏–≥–Ω–æ—Ä–∏—Ä—É—è –∑–∞–ø—è—Ç—ã–µ –≤–Ω—É—Ç—Ä–∏ –∫–∞–≤—ã—á–µ–∫ -->
            //<!-- Separating lines by commas, ignoring commas inside quotation marks -->
            const columns = row.match(/(".*?"|[^",\n]+)(?=\s*,|\s*$)/g).map(col => col.replace(/^"|"$/g, '').trim());

            //<!-- –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö –∑–Ω–∞—á–µ–Ω–∏–π -->
            //<!-- Checking for all values -->
            const id = columns[0] || '';
            const title_ru = columns[1] || '';
            const status1 = columns[2] || '';
            const status2 = columns[3] || '';

            return {
                id,
                title_ru,
                status1,
                status2
            };
        });
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:', error);
        return [];
    }
}

        //<!-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∏–≥—Ä -->
        //<!-- A function for displaying a list of games -->
        async function displayGamesList() {
            const gamesList = await loadGamesData();
            const gamesListElement = document.getElementById('games-list');
            gamesList.forEach(games => {
                const listItem = document.createElement('li');
                listItem.innerHTML = `
                    <div>
                        <strong>${games.title_ru}</strong><br>
                        <span style="font-size: 0.9em; color: gray;">${games.status1}</span>
                    </div>
                    <span>${games.status2}</span>
                `;
                gamesListElement.appendChild(listItem);
            });
        }

        //<!-- –ó–∞–ø—É—Å–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∏–≥—Ä -->
        //<!-- Starting the game list display -->
        displayGamesList();
    </script>

    <!-- –ö–Ω–æ–ø–∫–∞ —Å–º–µ–Ω—ã —è–∑—ã–∫–∞ -->
    <!-- Language change button -->
    <div class="language-switch">
        <button class="lang-btn" data-lang="ru">RU</button>
        <button class="lang-btn" data-lang="en">EN</button>
    </div>

    <!-- –ó–∞–ø—Ä–æ—Å —Å–∫—Ä–∏–ø—Ç–æ–≤ -->
    <!-- Request Scripts -->
    <script src="scripts.js"></script>

</body>
</html>
